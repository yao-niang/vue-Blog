(function(){"use strict";var t={3538:function(t,e,n){var a=n(9242),i=n(3396);const s=t=>((0,i.dD)("data-v-531f43a4"),t=t(),(0,i.Cn)(),t),o={id:"App"},r={class:"siteAside"},c=s((()=>(0,i._)("div",null,null,-1)));function l(t,e,n,a,s,l){const d=(0,i.up)("SiteAside"),u=(0,i.up)("router-view"),p=(0,i.up)("Layout");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(p,null,{left:(0,i.w5)((()=>[(0,i._)("div",r,[(0,i.Wm)(d)])])),default:(0,i.w5)((()=>[(0,i.Wm)(u)])),_:1}),c])}var d=n(7139);const u={class:"avatar-conint"},p=["src"];function m(t,e,n,a,s,o){return(0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("img",{src:n.url,alt:"",style:(0,d.j5)({width:n.size+"px",height:n.size+"px"})},null,12,p),(0,i._)("div",null,(0,d.zw)(o.fullName),1)])}var h={props:{url:{type:String,required:!0},size:{type:Number,default:100}},computed:{fullName:{get(){},set(){}}}},g=n(89);const f=(0,g.Z)(h,[["render",m],["__scopeId","data-v-e85c702a"]]);var y=f;function v(t,e,n,a,s,o){return(0,i.wg)(),(0,i.iD)("i",{class:(0,d.C_)(["iconfont",o.fontClass])},null,2)}const w={QQ:"icon-QQ",shezhi:"icon-shezhi",wushuju:"icon-wushuju",error:"icon-jinggao",xiangshang:"icon-xiangshang",xiangxia:"icon-xiangxia",guanyu:"icon-guanyuwomen",weixin:"icon-weixin",wenzhang:"icon-wenzhang",youxiang:"icon-youxiang",xiangmu:"icon-xiangmu",liuyanban:"icon-liuyanban-05",github:"icon-github",shouye:"icon-shouye"};var b={props:{type:{type:String,require:!0}},components:{},computed:{fontClass(){return w[this.type]}}};const _=(0,g.Z)(b,[["render",v],["__scopeId","data-v-55a74696"]]);var D=_;const j={key:0,class:"Pager-content"},S=["onClick"];function k(t,e,n,a,s,o){return n.total>1?((0,i.wg)(),(0,i.iD)("div",j,[(0,i._)("a",{onClick:e[0]||(e[0]=t=>o.headleClick(1)),class:(0,d.C_)({disabled:1===n.current})},"|<<",2),(0,i._)("a",{onClick:e[1]||(e[1]=t=>o.headleClick(n.current-1)),class:(0,d.C_)({disabled:1===n.current})},"<<",2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.numberArr,((t,e)=>((0,i.wg)(),(0,i.iD)("a",{onClick:e=>o.headleClick(t),key:e,class:(0,d.C_)({active:t===n.current})},(0,d.zw)(t),11,S)))),128)),(0,i._)("a",{onClick:e[2]||(e[2]=t=>o.headleClick(n.current+1)),class:(0,d.C_)({disabled:n.current===o.maxNumber})},">>",2),(0,i._)("a",{onClick:e[3]||(e[3]=t=>o.headleClick(o.maxNumber)),class:(0,d.C_)({disabled:n.current===o.maxNumber})},">>|",2)])):(0,i.kq)("",!0)}var C={props:{current:{type:Number,default:1},total:{type:Number,default:0},limit:{type:Number,default:10},visibleNumber:{type:Number,default:10}},computed:{maxNumber(){return Math.ceil(this.total/this.limit)},numberArr(){let t=[];for(let e=this.visibleMin;e<=this.visibleMax;e++)t.push(e);return t},visibleMin(){let t=this.current-Math.floor(this.visibleNumber/2);return t<1&&(t=1),t},visibleMax(){let t=this.visibleMin+this.visibleNumber-1;return t>this.maxNumber&&(t=this.maxNumber),t}},methods:{headleClick(t){t<1&&(t=1),t>this.maxNumber&&(t=this.maxNumber),t!==this.current&&this.$emit("pageNumber",t)}}};const x=(0,g.Z)(C,[["render",k],["__scopeId","data-v-0c115520"]]);var z=x;const $={class:"Empty-center"};function L(t,e,n,a,s,o){const r=(0,i.up)("Icon");return(0,i.wg)(),(0,i.iD)("div",$,[(0,i.Wm)(r,{type:"wushuju",class:"icon-font"}),(0,i._)("div",null,(0,d.zw)(n.text),1)])}var I={components:{Icon:D},props:{text:{type:String,default:"无数据"}}};const A=(0,g.Z)(I,[["render",L],["__scopeId","data-v-200e995c"]]);var T=A;const M={class:"image-loader-container"},q=["src"],O=["src"];function W(t,e,n,a,s,o){return(0,i.wg)(),(0,i.iD)("div",M,[s.everything?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("img",{key:0,class:"placeholder",src:n.placeholder},null,8,q)),(0,i._)("img",{src:n.src,alt:"",onLoad:e[0]||(e[0]=(...t)=>o.handleLoad&&o.handleLoad(...t)),style:(0,d.j5)({opacity:o.originOption,transition:`${n.duration}ms`})},null,44,O)])}var B={props:{src:{type:String,require:!0},placeholder:{type:String,require:!0},duration:{type:Number,default:500}},computed:{originOption(){return this.originLoaded?1:0}},data(){return{originLoaded:!1,everything:!1}},methods:{handleLoad(){this.originLoaded=!0,setTimeout((()=>{this.everything=!0,this.$emit("load")}),this.duration)}}};const N=(0,g.Z)(B,[["render",W],["__scopeId","data-v-40b2527c"]]);var P=N;const E={class:"site-aside-content"},H={class:"avatar-conint"},Z={key:0,class:"tle"},Y={key:1,class:"footer"};function R(t,e,n,a,s,o){const r=(0,i.up)("Avatar"),c=(0,i.up)("Menu"),l=(0,i.up)("Contace"),u=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("div",E,[(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",H,[t.data?((0,i.wg)(),(0,i.j4)(r,{key:0,size:150,url:t.data.avatar},null,8,["url"])):(0,i.kq)("",!0)])),[[u,t.loading]]),t.data?((0,i.wg)(),(0,i.iD)("div",Z,(0,d.zw)(t.data.siteTitle),1)):(0,i.kq)("",!0),(0,i.wy)((0,i.Wm)(c,null,null,512),[[u,t.loading]]),(0,i.wy)((0,i.Wm)(l,null,null,512),[[u,t.loading]]),t.data?((0,i.wg)(),(0,i.iD)("p",Y,(0,d.zw)(t.data.icp),1)):(0,i.kq)("",!0)])}const Q=t=>((0,i.dD)("data-v-03d45550"),t=t(),(0,i.Cn)(),t),J={class:"contact-container"},F={href:"#"},G={class:"icon"},K=Q((()=>(0,i._)("span",null,"2384636535",-1))),X=Q((()=>(0,i._)("div",{class:"pop"},[(0,i._)("img",{src:"https://img2.baidu.com/it/u=2743606418,860531633&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500",alt:""})],-1))),U={href:"#"},V={class:"icon"},tt=Q((()=>(0,i._)("span",null,"暂不外露",-1))),et=Q((()=>(0,i._)("div",{class:"pop"},[(0,i._)("img",{src:"https://img2.baidu.com/it/u=2743606418,860531633&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500",alt:""})],-1))),nt={href:"#"},at={class:"icon"},it=Q((()=>(0,i._)("span",null,"2384636535@qq.com",-1))),st=Q((()=>(0,i._)("div",{class:"pop"},[(0,i._)("img",{src:"https://img2.baidu.com/it/u=2743606418,860531633&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500",alt:""})],-1))),ot={href:"#"},rt={class:"icon"},ct=Q((()=>(0,i._)("span",null,"yao-niang",-1))),lt=Q((()=>(0,i._)("div",{class:"pop"},[(0,i._)("img",{src:"https://img2.baidu.com/it/u=2743606418,860531633&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500",alt:""})],-1)));function dt(t,e,n,a,s,o){const r=(0,i.up)("Icon");return(0,i.wg)(),(0,i.iD)("div",J,[(0,i._)("ul",null,[(0,i._)("li",null,[(0,i._)("a",F,[(0,i._)("div",G,[(0,i.Wm)(r,{type:"QQ"}),K])]),X]),(0,i._)("li",null,[(0,i._)("a",U,[(0,i._)("div",V,[(0,i.Wm)(r,{type:"weixin"}),tt])]),et]),(0,i._)("li",null,[(0,i._)("a",nt,[(0,i._)("div",at,[(0,i.Wm)(r,{type:"youxiang"}),it])]),st]),(0,i._)("li",null,[(0,i._)("a",ot,[(0,i._)("div",rt,[(0,i.Wm)(r,{class:"icon-icon",type:"github"})]),ct]),lt])])])}var ut={components:{Icon:D}};const pt=(0,g.Z)(ut,[["render",dt],["__scopeId","data-v-03d45550"]]);var mt=pt;const ht={class:"menu-container"},gt={class:"menu-for"},ft={class:"icon"},yt={class:"title"};function vt(t,e,n,a,s,o){const r=(0,i.up)("Icon"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",ht,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.items,((t,e)=>((0,i.wg)(),(0,i.j4)(c,{exact:t.exact,to:{name:t.name},key:e,"active-class":"selected","exact-active-class":""},{default:(0,i.w5)((()=>[(0,i._)("div",gt,[(0,i._)("div",ft,[(0,i.Wm)(r,{type:t.icon},null,8,["type"])]),(0,i._)("span",yt,(0,d.zw)(t.title),1)])])),_:2},1032,["exact","to"])))),128))])}var wt={components:{Icon:D},data(){return{items:[{name:"Home",title:"首页",icon:"shouye",exact:!0},{name:"Blog",title:"文章",icon:"wenzhang",exact:!1},{name:"About",title:"关于我",icon:"guanyu",exact:!0},{name:"Project",title:"项目&效果",icon:"xiangmu",exact:!0},{name:"Message",title:"留言板",icon:"liuyanban",exact:!0}]}},methods:{}};const bt=(0,g.Z)(wt,[["render",vt],["__scopeId","data-v-068eb861"]]);var _t=bt,Dt=n(65),jt={components:{Avatar:y,Contace:mt,Menu:_t},mounted(){console.log(this.$store._modules.root.state.setting.data)},computed:{...(0,Dt.rn)("setting",["loading","data"])}};const St=(0,g.Z)(jt,[["render",R],["__scopeId","data-v-e75fec0e"]]);var kt=St;const Ct={class:"layout-container"},xt={class:"left"},zt={class:"main"},$t={class:"right"};function Lt(t,e,n,a,s,o){return(0,i.wg)(),(0,i.iD)("div",Ct,[(0,i._)("div",xt,[(0,i.WI)(t.$slots,"left")]),(0,i._)("div",zt,[(0,i.WI)(t.$slots,"default")]),(0,i._)("div",$t,[(0,i.WI)(t.$slots,"right")])])}var It={};const At=(0,g.Z)(It,[["render",Lt]]);var Tt=At;const Mt=t=>((0,i.dD)("data-v-068eda14"),t=t(),(0,i.Cn)(),t),qt={class:"ToTop-content"},Ot=Mt((()=>(0,i._)("div",{class:"raid"},[(0,i._)("span",null,"Top")],-1))),Wt=[Ot];function Bt(t,e,n,a,s,o){return(0,i.wg)(),(0,i.iD)("div",qt,Wt)}var Nt={data(){return{show:!1}},destroyed(){this.$bus.$off("mainScroll",this.handleScroll)},created(){this.$bus.$on("mainScroll",this.handleScroll)},methods:{handleScroll(t){}}};const Pt=(0,g.Z)(Nt,[["render",Bt],["__scopeId","data-v-068eda14"]]);var Et=Pt,Ht={name:"App",data(){return{current:1,total:302}},components:{Avatar:y,Icon:D,Pager:z,Empty:T,ImageLoader:P,SiteAside:kt,Layout:Tt,ToTop:Et},computed:{},methods:{headlePageNumber(t){console.log("页码变了",t),this.current=t},imgLoad(){console.log("图片加载完成")}}};const Zt=(0,g.Z)(Ht,[["render",l],["__scopeId","data-v-531f43a4"]]);var Yt=Zt,Rt=n(678);const Qt={class:"indicator"},Jt=["onClick"];function Ft(t,e,n,s,o,r){const c=(0,i.up)("Carouseliten"),l=(0,i.up)("Icon"),u=(0,i.Q2)("loading");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{class:"home-container",ref:"container",onTransitionend:e[2]||(e[2]=(...t)=>r.transitionEnd&&r.transitionEnd(...t)),onWheel:e[3]||(e[3]=(...t)=>r.handleWheel&&r.handleWheel(...t))},[(0,i._)("ul",{class:"carousel-container",style:(0,d.j5)({marginTop:r.marginTop})},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.data,(t=>((0,i.wg)(),(0,i.iD)("li",{key:t.id},[(0,i.Wm)(c,{carouse:t},null,8,["carouse"])])))),128))],4),(0,i.wy)((0,i._)("div",{class:"icon icon-up",onClick:e[0]||(e[0]=t=>r.switchTo(o.index-1))},[(0,i.Wm)(l,{type:"xiangshang"})],512),[[a.F8,o.index>=1]]),(0,i.wy)((0,i._)("div",{class:"icon icon-down",onClick:e[1]||(e[1]=t=>r.switchTo(o.index+1))},[(0,i.Wm)(l,{type:"xiangxia"})],512),[[a.F8,o.index<t.data.length-1]]),(0,i._)("ul",Qt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.data,((t,e)=>((0,i.wg)(),(0,i.iD)("li",{class:(0,d.C_)({active:o.index===e}),key:t.id,onClick:t=>r.switchTo(e)},null,10,Jt)))),128))])],32)),[[u,t.loading]])}function Gt(t,e,n,a,s,o){const r=(0,i.up)("ImageLoader");return(0,i.wg)(),(0,i.iD)("div",{class:"carousel-item-container",ref:"container",onMousemove:e[0]||(e[0]=(...t)=>o.handleMouseMove&&o.handleMouseMove(...t)),onMouseleave:e[1]||(e[1]=(...t)=>o.handleMouseLeave&&o.handleMouseLeave(...t))},[(0,i._)("div",{class:"carouse-img",ref:"image",style:(0,d.j5)(o.imagePosition)},[(0,i.Wm)(r,{onLoad:o.showWord,src:n.carouse.bigImg,placeholder:n.carouse.midImg},null,8,["onLoad","src","placeholder"])],4),(0,i._)("div",{class:"title",ref:"title"},(0,d.zw)(n.carouse.title),513),(0,i._)("div",{class:"desc",ref:"desc"},(0,d.zw)(n.carouse.description),513)],544)}var Kt={props:["carouse"],components:{ImageLoader:P},data(){return{titleWidth:0,descWidth:0,containerSize:null,innerSize:null,mouseX:0,mouseY:0}},computed:{imagePosition(){if(!this.innerSize||!this.containerSize)return;const t=this.innerSize.width-this.containerSize.width,e=this.innerSize.height-this.containerSize.height,n=-t/this.containerSize.width*this.mouseX,a=-e/this.containerSize.height*this.mouseY;return{transform:`translate(${n}px,${a}px`}},center(){return{x:this.containerSize.width/2,y:this.containerSize.height/2}}},mounted(){this.titleWidth=this.$refs.title.clientWidth,this.descWidth=this.$refs.desc.clientWidth,this.setSize(),this.mouseX=this.center.x,this.mouseY=this.center.y,window.addEventListener("resize",this.setSize)},destroyed(){window.removeEventListener("resize",this.setSize)},methods:{showWord(){this.$refs.title.style.opacity=1,this.$refs.title.style.width=0,this.$refs.title.clientWidth,this.$refs.title.style.transition="1s",this.$refs.title.style.width=this.titleWidth+"px",this.$refs.desc.style.opacity=1,this.$refs.desc.style.width=0,this.$refs.desc.clientWidth,this.$refs.desc.style.transition="2s 1s",this.$refs.desc.style.width=this.descWidth+"px"},setSize(){this.containerSize={width:this.$refs.container.clientWidth,height:this.$refs.container.clientHeight},this.innerSize={width:this.$refs.image.clientWidth,height:this.$refs.image.clientHeight}},handleMouseMove(t){const e=this.$refs.container.getBoundingClientRect();this.mouseX=t.clientX-e.left,this.mouseY=t.clientY-e.top},handleMouseLeave(){this.mouseX=this.center.x,this.mouseY=this.center.y}}};const Xt=(0,g.Z)(Kt,[["render",Gt],["__scopeId","data-v-7b1ba170"]]);var Ut=Xt,Vt={data(){return{index:0,clientHeight:0,switchching:!1}},components:{Carouseliten:Ut,Icon:D},created(){this.$store.dispatch("banner/fetchBanner")},mounted(){this.clientHeight=this.$refs.container.clientHeight,window.addEventListener("resize",this.handelresize)},computed:{marginTop(){return-this.index*this.clientHeight+"px"},...(0,Dt.rn)("banner",["loading","data"])},destroyed(){window.removeEventListener("resize",this.handelresize)},methods:{switchTo(t){this.index=t},handleWheel(t){this.switchching||(t.deltaY<-5&&this.index>0?this.index--:t.deltaY>5&&this.index<this.data.length-1&&this.index++)},transitionEnd(){this.switchching=!1},handelresize(){this.clientHeight=this.$refs.container.clientHeight}},beforeCreate(){}};const te=(0,g.Z)(Vt,[["render",Ft],["__scopeId","data-v-560149e9"]]);var ee=te;function ne(t,e,n,a,s,o){const r=(0,i.up)("BlogList"),c=(0,i.up)("BlogCategory"),l=(0,i.up)("Layout");return(0,i.wg)(),(0,i.j4)(l,null,{right:(0,i.w5)((()=>[(0,i.Wm)(c)])),default:(0,i.w5)((()=>[(0,i.Wm)(r)])),_:1})}const ae={class:"blog-list-container",ref:"container"},ie={key:0,class:"thumb"},se=["alt","title"],oe={class:"main"},re={class:"aside"},ce={class:"desc"};function le(t,e,n,a,s,o){const r=(0,i.up)("RouterLink"),c=(0,i.up)("Pager"),l=(0,i.Q2)("lazy"),u=(0,i.Q2)("loading");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",ae,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.data.rows,(t=>((0,i.wg)(),(0,i.iD)("li",{key:t.id},[t.thumb?((0,i.wg)(),(0,i.iD)("div",ie,[(0,i.Wm)(r,{to:{name:"BlogDetail",params:{id:t.id}}},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("img",{alt:t.title,title:t.title},null,8,se),[[l,t.thumb]])])),_:2},1032,["to"])])):(0,i.kq)("",!0),(0,i._)("div",oe,[(0,i.Wm)(r,{to:{name:"BlogDetail",params:{id:t.id}}},{default:(0,i.w5)((()=>[(0,i._)("h2",null,(0,d.zw)(t.title),1)])),_:2},1032,["to"]),(0,i._)("div",re,[(0,i._)("span",null,"日期:"+(0,d.zw)(o.formatDate(t.createDate)),1),(0,i._)("span",null,"浏览:"+(0,d.zw)(t.scanNumber),1),(0,i._)("span",null,"评论:"+(0,d.zw)(t.commentNumber),1),(0,i.Wm)(r,{to:{name:"CategoryBlog",params:{categoryId:t.category.id}},class:""},{default:(0,i.w5)((()=>[(0,i.Uk)((0,d.zw)(t.category.name),1)])),_:2},1032,["to"])]),(0,i._)("div",ce,(0,d.zw)(t.description),1)])])))),128))]),t.data.total?((0,i.wg)(),(0,i.j4)(c,{key:0,current:o.routeInfo.page,total:t.data.total,limit:o.routeInfo.limit,visibleNumber:10,onPageNumber:o.handlePageNumber},null,8,["current","total","limit","onPageNumber"])):(0,i.kq)("",!0)])),[[u,s.isLoading]])}function de(t=null){return{data(){return{isLoading:!0,data:t}},async created(){this.data=await this.fetchData(),this.isLoading=!1}}}var ue=n(6265),pe=n.n(ue);function me(t,e){const n=(0,a.ri)({render:()=>(0,i.h)(t,e)}),s=document.createDocumentFragment(),o=n.mount(s);return n.mount(),o.$el}var he={message:"x5IizpJs9tIo3qnIoSBq","message-info":"XgUB218bcbMJTsChmzlS","message-success":"oQsEiMMW7eYeIDom1hd6","message-warn":"L3fEADNlFVY6ifYZa2sG","message-error":"w47vtb9JuYghgZ6eGJ7Q",icon:"Niurcm4YPA61oQ92bGVq"};n(4545);function ge(t={}){const e=t.container||"忘记输入内容了你",n=t.type||"error",a=t.duration||2e3,i=t.container||document.body;let s=document.createElement("div");const o=me(D,{type:n});s.innerHTML=`<span class='${he.icon}'>${o.outerHTML}</span><div>${e}</div>`;let r=he[`message-${n}`];s.className=`${he.message} ${r}`,i?"static"===getComputedStyle(i).position&&(i.style.position="relative"):i=document.body,i.appendChild(s),s.clientHeight,s.style.opacity=1,s.style.transform="translate(-50%,-50%)",setTimeout((()=>{s.style.opacity=0,s.style.transform="translate(-50%,-50%) translateY(-25px)",s.addEventListener("transitionend",(function(){s.remove(),t.callback()&&t.callback()}),{once:!0})}),a)}let fe=pe().create();fe.interceptors.response.use((function(t){return 0!==t.data.code?(ge({content:t.data.code,type:"error",duration:1500}),null):t.data.data}));var ye=fe;async function ve(t=1,e=10,n=-1){return await ye.get("/api/blog",{params:{page:t,limit:e,categoryid:n}})}async function we(){return await ye.get("/api/blogtype")}async function be(t){return await ye.get(`/api/blog/${t}`)}async function _e(t){return await ye.post("/api/comment",t)}async function De(t,e=1,n=10){return await ye.get("/api/comment",{params:{blogid:t,page:e,limit:n}})}function je(t){const e=new Date(+t),n=(e.getMonth()+1).toString().padStart(2,"0"),a=(e.getDay()+1).toString().padStart(2,"0");return`${e.getFullYear()}-${n}-${a}`}function Se(t,e){let n=null;return(...a)=>{clearTimeout(n),n=setTimeout((()=>{t(...a)}),e)}}var ke={mixins:[de({})],components:{Pager:z},data(){return{isLoading:!0,list:[]}},methods:{formatDate:je,async fetchData(){return await ve(this.routeInfo.page,this.routeInfo.limit,this.routeInfo.categoryId)},handlePageNumber(t){const e={page:t,limit:this.routeInfo.limit};-1===this.routeInfo.categoryId?this.$router.push({name:"Blog",query:e}):this.$router.push({name:"CategoryBlog",query:e,params:{categoryId:this.routeInfo.categoryId}})}},computed:{routeInfo(){const t=+this.$route.params.categoryId||-1,e=+this.$route.query.page||1,n=+this.$route.query.limit||10;return{categoryId:t,page:e,limit:n}}},watch:{async $route(){this.isLoading=!0,this.data=await this.fetchData(),this.$refs.container.scrollTop=0,this.isLoading=!1}}};const Ce=(0,g.Z)(ke,[["render",le],["__scopeId","data-v-83906bb0"]]);var xe=Ce;const ze=t=>((0,i.dD)("data-v-2d8a617b"),t=t(),(0,i.Cn)(),t),$e={class:"blog-category-container"},Le=ze((()=>(0,i._)("h2",null,"文章分类",-1)));function Ie(t,e,n,a,s,o){const r=(0,i.up)("RightList"),c=(0,i.Q2)("loading");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",$e,[Le,(0,i.Wm)(r,{list:o.list,onSelect:o.handleSelect},null,8,["list","onSelect"])])),[[c,t.isLoading]])}const Ae={class:"right-list-container"},Te=["onClick"];function Me(t,e,n,a,s,o){const r=(0,i.up)("RightList",!0);return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("ul",Ae,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.list,((t,e)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i._)("span",{onClick:e=>o.handleClick(t),class:(0,d.C_)({active:t.isSelect})},(0,d.zw)(t.name),11,Te),t.aside?((0,i.wg)(),(0,i.iD)("span",{key:0,class:(0,d.C_)(["aside",{active:t.isSelect}])},(0,d.zw)(t.aside),3)):(0,i.kq)("",!0),(0,i.Wm)(r,{onSelect:o.handleClick,list:t.children},null,8,["onSelect","list"])])))),128))])])}var qe={name:"RightList",props:{list:{type:Array,default:()=>{}}},methods:{handleClick(t){t.isSelect||this.$emit("select",t)}},created(){}};const Oe=(0,g.Z)(qe,[["render",Me],["__scopeId","data-v-474ecd2e"]]);var We=Oe,Be={mixins:[de([])],components:{RightList:We},computed:{categoryId(){return+this.$route.params.categoryId||-1},limit(){return+this.$route.params.limit||10},list(){const t=this.data.reduce(((t,e)=>t+e.articleCount),0),e=[{name:"全部",id:-1,articleCount:t},...this.data];return e.map((t=>({...t,isSelect:t.id===this.categoryId,aside:`${t.articleCount}篇`})))}},methods:{async fetchData(){return await we()},handleSelect(t){const e={page:1,limit:this.limit};-1===t.id?this.$router.push({name:"Blog",query:e}):this.$router.push({name:"CategoryBlog",query:e,params:{categoryId:t.id}})}},created(){}};const Ne=(0,g.Z)(Be,[["render",Ie],["__scopeId","data-v-2d8a617b"]]);var Pe=Ne,Ee={components:{Layout:Tt,BlogList:xe,BlogCategory:Pe},data(){return{}},methods:{}};const He=(0,g.Z)(Ee,[["render",ne]]);var Ze=He;const Ye={class:"about-content"},Re=["src"];function Qe(t,e,n,a,s,o){const r=(0,i.Q2)("loading");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",Ye,[t.src?((0,i.wg)(),(0,i.iD)("iframe",{key:0,class:"iframe-content",src:t.src,frameborder:"0"},null,8,Re)):(0,i.kq)("",!0)])),[[r,t.loading]])}var Je={data(){return{}},computed:(0,Dt.rn)("about",{src:"data",loading:"loading"}),created(){this.$store.dispatch("about/fetchAbout")}};const Fe=(0,g.Z)(Je,[["render",Qe],["__scopeId","data-v-1e33feb6"]]);var Ge=Fe;const Ke={class:"project-container",ref:"projectContainer"},Xe=["href","target"],Ue={class:"thumb"},Ve={class:"info"},tn=["href","target"],en=["href"];function nn(t,e,n,a,s,o){const r=(0,i.Q2)("lazy"),c=(0,i.Q2)("loading");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",Ke,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.data,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.id,class:"project-item"},[(0,i._)("a",{href:t.url?t.url:"javascript:alert('该项目无法通过外网访问')",target:t.url?"_blank":"_self"},[(0,i.wy)((0,i._)("img",Ue,null,512),[[r,t.thumb]])],8,Xe),(0,i._)("div",Ve,[(0,i._)("h2",null,[(0,i._)("a",{href:t.url?t.url:"javascript:alert('该项目无法通过外网访问')",target:t.url?"_blank":"_self"},(0,d.zw)(t.name),9,tn)]),t.github?((0,i.wg)(),(0,i.iD)("a",{key:0,class:"github",target:"_blank",href:t.github}," github ",8,en)):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.description,((t,e)=>((0,i.wg)(),(0,i.iD)("p",{key:e},(0,d.zw)(t),1)))),128))])])))),128))])),[[c,t.loading]])}var an={computed:(0,Dt.rn)("project",["loading","data"]),created(){this.$store.dispatch("project/fetchProject")}};const sn=(0,g.Z)(an,[["render",nn],["__scopeId","data-v-74b6841b"]]);var on=sn;const rn={class:"message-container"};function cn(t,e,n,a,s,o){const r=(0,i.up)("MessageArea");return(0,i.wg)(),(0,i.iD)("div",rn,[(0,i.Wm)(r,{title:"留言板",isLiLoading:t.isLoading,list:t.data.rows,subTitle:`(${t.data.total})`,onIndexsubmit:o.handleSubmit},null,8,["isLiLoading","list","subTitle","onIndexsubmit"])])}const ln={class:"message-area-container"},dn={class:"isLiLoading"};function un(t,e,n,a,s,o){const r=(0,i.up)("DataFrom"),c=(0,i.up)("DataList"),l=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("div",ln,[(0,i.Wm)(r,{onSubmit22:o.indexeSubmit},null,8,["onSubmit22"]),(0,i._)("h3",null,[(0,i.Uk)((0,d.zw)(n.title)+" ",1),(0,i._)("span",null,(0,d.zw)(n.subTitle),1)]),(0,i.Wm)(c,{list:n.list},null,8,["list"]),(0,i.wy)((0,i._)("div",dn,null,512),[[l,n.isLiLoading]])])}const pn={class:"form-item"},mn={class:"input-area"},hn={class:"tip"},gn={class:"error"},fn={class:"form-item"},yn={class:"text-area"},vn={class:"tip"},wn={class:"error"},bn={class:"form-item"},_n={class:"button-area"},Dn=["disabled"];function jn(t,e,n,s,o,r){return(0,i.wg)(),(0,i.iD)("form",{id:"data-form-container",class:"data-form-container",onSubmit:e[2]||(e[2]=(0,a.iM)(((...t)=>r.handleSubmit&&r.handleSubmit(...t)),["prevent"]))},[(0,i._)("div",pn,[(0,i._)("div",mn,[(0,i.wy)((0,i._)("input",{type:"text",maxlength:"10",placeholder:"用户昵称","onUpdate:modelValue":e[0]||(e[0]=t=>o.fromData.nickname=t)},null,512),[[a.nr,o.fromData.nickname]]),(0,i._)("span",hn,(0,d.zw)(o.fromData.nickname.length)+"/10",1)]),(0,i._)("div",gn,(0,d.zw)(o.error.nickname),1)]),(0,i._)("div",fn,[(0,i._)("div",yn,[(0,i.wy)((0,i._)("textarea",{maxlength:"300",placeholder:"输入内容","onUpdate:modelValue":e[1]||(e[1]=t=>o.fromData.content=t)},null,512),[[a.nr,o.fromData.content]]),(0,i._)("span",vn,(0,d.zw)(o.fromData.content.length)+"/300",1)]),(0,i._)("div",wn,(0,d.zw)(o.error.content),1)]),(0,i._)("div",bn,[(0,i._)("div",_n,[(0,i._)("button",{disabled:o.isSubmiting},(0,d.zw)(o.isSubmiting?"提交中...":"提交"),9,Dn)])])],32)}var Sn={data(){return{fromData:{nickname:"",content:""},error:{nickname:"",content:""},isSubmiting:!1}},methods:{handleSubmit(){this.error.nickname=this.fromData.nickname?"":"不知道要写昵称吗？",this.error.content=this.fromData.content?"":"不知道要写评论的内容吗",this.error.nickname||this.error.content||(this.isSubmiting=!0,this.$emit("submit22",this.fromData,(t=>{this.$showMessage({content:t,type:"error",duration:1e3,container:this.$refs.from,callback:()=>{this.fromData.nickname="",this.fromData.content="",this.isSubmiting=!1}})})))}}};const kn=(0,g.Z)(Sn,[["render",jn],["__scopeId","data-v-9fb18260"]]);var Cn=kn;const xn={class:"data-list-container"},zn={class:"avatar"},$n={class:"data"},Ln={class:"nickname"},In={class:"content"},An={class:"time"};function Tn(t,e,n,a,s,o){const r=(0,i.up)("Avatar");return(0,i.wg)(),(0,i.iD)("ul",xn,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.list,(t=>((0,i.wg)(),(0,i.iD)("li",{key:t.id},[(0,i._)("div",zn,[(0,i.Wm)(r,{url:t.avatar,size:44},null,8,["url"])]),(0,i._)("div",$n,[(0,i._)("div",Ln,(0,d.zw)(t.nickname),1),(0,i._)("div",In,(0,d.zw)(t.content),1),(0,i._)("div",An,(0,d.zw)(o.formatDate(t.createDate)),1)])])))),128))])}var Mn={props:{list:{type:Array,require:!0}},components:{Avatar:y},methods:{formatDate:je}};const qn=(0,g.Z)(Mn,[["render",Tn],["__scopeId","data-v-0f831cd8"]]);var On=qn,Wn={props:{title:{type:String,default:""},subTitle:{type:String,default:""},list:{type:Array,default:()=>[]},isLiLoading:{type:Boolean,default:!1}},components:{DataFrom:Cn,DataList:On},methods:{indexeSubmit(t,e){this.$emit("indexsubmit",t,e)}}};const Bn=(0,g.Z)(Wn,[["render",un]]);var Nn=Bn;async function Pn(t=1,e=10){return await ye.get("/api/message",{params:{page:t,limit:e}})}async function En(t){return await ye.post("/api/message",t)}var Hn={mixins:[de({total:0,rows:[]})],components:{MessageArea:Nn},data(){return{page:1,limit:10}},methods:{async fetchData(){return await Pn(this.page,this.limit)},async handleSubmit(t,e){await En(t),e("我是你爹")}},created(){}};const Zn=(0,g.Z)(Hn,[["render",cn],["__scopeId","data-v-5f5b9924"]]);var Yn=Zn;const Rn={class:"main-container",ref:"divContainer"},Qn={class:"blog-toc"};function Jn(t,e,n,a,s,o){const r=(0,i.up)("BlogDetail"),c=(0,i.up)("BlogComment"),l=(0,i.up)("BlogTOC"),d=(0,i.up)("Layout"),u=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.j4)(d,null,{right:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",Qn,[t.data?((0,i.wg)(),(0,i.j4)(l,{key:0,toc:t.data.toc},null,8,["toc"])):(0,i.kq)("",!0)])),[[u,t.isLoading]])])),default:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",Rn,[t.data?((0,i.wg)(),(0,i.j4)(r,{key:0,blog:t.data},null,8,["blog"])):(0,i.kq)("",!0),t.isLoading?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(c,{key:1}))])),[[u,t.isLoading]])])),_:1})}const Fn={class:"blog-detail-container"},Gn={class:"title"},Kn={class:"aside"},Xn={href:"#data-form-container"},Un=["innerHTML"];function Vn(t,e,n,a,s,o){return(0,i.wg)(),(0,i.iD)("div",Fn,[(0,i._)("h1",Gn,(0,d.zw)(n.blog.title),1),(0,i._)("div",Kn,[(0,i._)("span",null,"日期:"+(0,d.zw)(o.formatDate(n.blog.createDate)),1),(0,i._)("span",null,"浏览:"+(0,d.zw)(n.blog.scanNumber),1),(0,i._)("a",Xn,"评论:"+(0,d.zw)(n.blog.commentNumber),1)]),(0,i._)("div",{innerHTML:n.blog.htmlContent,class:"markdown-body"},null,8,Un)])}var ta={props:{blog:{type:Object,required:!0}},methods:{formatDate:je}};const ea=(0,g.Z)(ta,[["render",Vn],["__scopeId","data-v-8c564690"]]);var na=ea;const aa=t=>((0,i.dD)("data-v-3cbfd2b1"),t=t(),(0,i.Cn)(),t),ia={class:"blog-toc-container"},sa=aa((()=>(0,i._)("h2",null,"目录",-1)));function oa(t,e,n,a,s,o){const r=(0,i.up)("RightList");return(0,i.wg)(),(0,i.iD)("div",ia,[sa,(0,i.Wm)(r,{list:n.toc,onSelect:o.handleSelect},null,8,["list","onSelect"])])}var ra={props:{toc:{type:Array}},data(){return{activeAnchor:""}},components:{RightList:We},created(){this.setSelectDebounce=Se(this.setSelect,50),this.$bus.$on("mainScroll",this.setSelectDebounce)},destroyed(){this.$bus.$off("mainScroll",this.setSelectDebounce)},methods:{handleSelect(t){location.hash=t.anchor},setSelect(t){if(!t)return;this.activeAnchor="";const e=200;for(const n of this.doms){if(!n)continue;const t=n.getBoundingClientRect().top;if(t>=0&&t<=e)return void(this.activeAnchor=n.id);t>e||(this.activeAnchor=n.id)}}},computed:{tocWithSelect(){const t=(e=[])=>e.map((e=>({...e,isSelect:e.anchor===this.activeAnchor,children:t(e.children)})));return t(this.toc)},doms(){const t=[],e=n=>{for(const a of n)t.push(document.getElementById(a.anchor)),a.children&&a.children.length&&e(a.children)};return e(this.toc),t}}};const ca=(0,g.Z)(ra,[["render",oa],["__scopeId","data-v-3cbfd2b1"]]);var la=ca;const da={class:"blog-comment-container"};function ua(t,e,n,a,s,o){const r=(0,i.up)("MessageArea");return(0,i.wg)(),(0,i.iD)("div",da,[(0,i.Wm)(r,{onIndexsubmit:o.blogeSubmit,title:"评论列表",subTitle:`(${t.data.total})`,list:t.data.rows,isLiLoading:!1},null,8,["onIndexsubmit","subTitle","list"])])}var pa={mixins:[de({total:0,rows:[]})],components:{MessageArea:Nn},data(){return{page:1,limitL:10}},created(){this.$bus.$on("mainScroll",this.handleScroll),window.fetchMore=this.fetchMore},methods:{async fetchData(){return await De(this.$route.params.id,this.page,this.limitL)},async fetchMore(){if(this.hasMore)return;console.log(111),this.page++,this.isLoading=!0;const t=await this.fetchData();this.data.total=t.total,this.data.rows=this.data.rows.concat(t.rows),this.isLoading=!1},async blogeSubmit(t,e){const n=await _e({blogId:this.$route.params.id,...t});this.data.rows.unshift(n),this.data.total++,console.log(t),e("发布成功")},async handleScroll(t){if(this.isLoading)return;const e=100;let n=Math.abs(t.scrollTop+t.clientHeight-t.scrollHeight);n<=e&&(this.fetchMore(),console.log("到达了底部"))}},computed:{hasMore(){return this.data.rows<this.data.total.length}}};const ma=(0,g.Z)(pa,[["render",ua],["__scopeId","data-v-275b10cf"]]);var ha=ma,ga={mixins:[de({})],components:{Layout:Tt,BlogDetail:na,BlogTOC:la,BlogComment:ha},data(){return{scrollTop:0}},created(){},methods:{async fetchData(){return await be(this.$route.params.id)},handleScroll(){this.$bus.$emit("mainScroll",this.$refs.divContainer)},handleSetMainScroll(t){this.$refs.divContainer.scrollTop=t}},mounted(){this.$bus.$on("setMainScroll",this.handleSetMainScroll),this.$refs.divContainer.addEventListener("scroll",this.handleScroll)},beforeDestroy(){this.$bus.$emit("mainScroll"),this.$refs.divContainer.removeEventListener("scroll",this.handleScroll),this.$bus.$off("setMainScroll",this.handleSetMainScroll)}};const fa=(0,g.Z)(ga,[["render",Jn],["__scopeId","data-v-555d0ba8"]]);var ya=fa;async function va(){return await ye.get("/api/banner")}var wa={namespaced:!0,state:{loading:!1,data:[]},mutations:{setLoading(t,e){t.loading=e},setData(t,e){t.data=e}},actions:{async fetchBanner(t){if(t.state.data.length)return;t.commit("setLoading",!0);const e=await va();t.commit("setData",e),t.commit("setLoading",!1)}}};async function ba(){return await ye.get("/api/setting")}var _a={namespaced:!0,state:{loading:!1,data:null},mutations:{setLoading(t,e){t.loading=e},setData(t,e){t.data=e}},actions:{async fetchSetting(t){t.commit("setLoading",!0);const e=await ba();t.commit("setData",e),t.commit("setLoading",!1)}}};async function Da(){return await ye.get("/api/about")}var ja={namespaced:!0,state:{loading:!1,data:[]},mutations:{setLoading(t,e){t.loading=e},setData(t,e){t.data=e}},actions:{async fetchAbout(t){t.commit("setLoading",!0);const e=await Da();t.commit("setData",e),t.commit("setLoading",!1)}}};async function Sa(){return await ye.get("/api/project")}var ka={namespaced:!0,state:{loading:!1,data:[]},mutations:{setLoading(t,e){t.loading=e},setData(t,e){t.data=e}},actions:{async fetchProject(t){t.commit("setLoading",!0);const e=await Sa();t.commit("setData",e),t.commit("setLoading",!1)}}},Ca={namespaced:!0,state:{loading:!1,data:[]},mutations:{setLoading(t,e){t.loading=e},setData(t,e){t.data=e}},actions:{async fetchMessage(t){t.commit("setLoading",!0);const e=await Pn();t.commit("setData",e),t.commit("setLoading",!1)}}},xa=(0,Dt.MT)({strict:!0,modules:{banner:wa,setting:_a,about:ja,project:ka,message:Ca},state(){return{count:0}},mutations:{increment(t){t.count++}}});const za=[{path:"/",name:"Home",component:ee,meta:{title:"首页"}},{path:"/Blog",name:"Blog",component:Ze,meta:{title:"文章"}},{path:"/Blog/:id",name:"BlogDetail",component:ya,meta:{title:"文章列表"}},{path:"/Blog/cate/:categoryId",name:"CategoryBlog",component:Ze,meta:{title:"文章详情"}},{path:"/About",name:"About",component:Ge,meta:{title:"关于我"}},{path:"/Project",name:"Project",component:on,meta:{title:"项目"}},{path:"/Message",name:"Message",component:Yn,meta:{title:"留言板"}}],$a=(0,Rt.p7)({history:(0,Rt.PO)(),routes:za});$a.afterEach(((t,e)=>{t.meta.title&&(xa.state.setting.data?document.title=t.meta.title+"-"+xa.state.setting.data.siteTitle:document.title=t.meta.title)}));var La=n(7634),Ia=n.n(La);Ia().mock("/api/banner","get",{code:0,msg:"",data:[{id:"1",midImg:"http://mdrs.yuanjin.tech/img/20201031205550.jpg",bigImg:"http://mdrs.yuanjin.tech/img/20201031205551.jpg",title:"凛冬将至",description:"想养一只西伯利亚大腮帮子仓鼠"},{id:"2",midImg:"https://images.pexels.com/photos/33109/fall-autumn-red-season.jpg?w=100",bigImg:"https://images.pexels.com/photos/33109/fall-autumn-red-season.jpg?fit=crop&crop=entropy&w=1920&h=1080",title:"血火同源",description:"想养一只西伯利亚大腮帮子仓鼠"},{id:"3",midImg:"http://mdrs.yuanjin.tech/img/20201031204401.jpg",bigImg:"http://mdrs.yuanjin.tech/img/20201031204403.jpg",title:"听我怒吼",description:"想养一只西伯利亚大腮帮子仓鼠"}]});var Aa=n(5410),Ta=n.n(Aa);Ia().mock("/api/blogtype","get",{code:0,msg:"","data|10-20":[{"id|+1":1,name:"分类@id","articleCount|0-300":0,"order|+1":1}]}),Ia().mock(/^\/api\/blog(\?.+)?$/,"get",(function(t){const e=Ta().parse(t.url);return Ia().mock({code:0,msg:"",data:{"total|2000-3000":0,[`rows|${e.limit||10}`]:[{id:"@guid",title:"@ctitle(1,50)",description:"@cparagraph(1,10)",category:{"id|1-10":0,name:"分类@id"},"scanNumber|0-3000":0,"commentNumber|0-300":30,"thumb|1":[Ia().Random.image("300x250","#000","#fff","@title(1,5)"),null],createDate:"@date('T')"}]}})})),Ia().mock(/^\/api\/blog\/[^/]+$/,"get",{code:0,msg:"",data:{id:"1",title:"CORS跨域方案详解",category:{"id|1-10":1,name:"分类@id"},description:"@cparagraph(1, 10)","scanNumber|0-10000":0,"commentNumber|0-100":0,createDate:"@date('T')",toc:[{name:"概述",anchor:"article-md-title-1"},{name:"简单请求",anchor:"article-md-title-2",children:[{name:"简单请求的判定",anchor:"article-md-title-3"},{name:"简单请求的交互规范",anchor:"article-md-title-4"}]},{name:"需要预检的请求",anchor:"article-md-title-5"},{name:"附带身份凭证的请求",anchor:"article-md-title-6"},{name:"一个额外的补充",anchor:"article-md-title-7"}],htmlContent:'<blockquote>\n    <p>阅读本文，你需要首先知道：</p><ol>\n    <li>浏览器的同源策略</li>\n    <li>跨域问题</li>\n    <li>JSONP原理</li>\n    <li>cookie原理</li>\n    </ol>\n    </blockquote>\n    <p>JSONP并不是一个好的跨域解决方案，它至少有着下面两个严重问题：</p><ol>\n    <li><strong>会打乱服务器的消息格式</strong>：JSONP要求服务器响应一段JS代码，但在非跨域的情况下，服务器又需要响应一个正常的JSON格式</li>\n    <li><strong>只能完成GET请求</strong>：JSONP的原理会要求浏览器端生成一个<code>script</code>元素，而<code>script</code>元素发出的请求只能是<code>get</code>请求</li>\n    </ol>\n    <p>所以，CORS是一种更好的跨域解决方案。</p><h1 id="article-md-title-1">概述</h1><p><code>CORS</code>是基于<code>http1.1</code>的一种跨域解决方案，它的全称是<strong>C</strong>ross-<strong>O</strong>rigin <strong>R</strong>esource <strong>S</strong>haring，跨域资源共享。</p><p>它的总体思路是：<strong>如果浏览器要跨域访问服务器的资源，需要获得服务器的允许</strong></p><figure class="markdown-image">\n          \n          <img style="width:auto" src="http://mdrs.yuanjin.tech/img/image-20200421152122793.png" title="image-20200421152122793" alt="image-20200421152122793">\n          <figcaption>image-20200421152122793</figcaption>\n      \n        </figure><p>而要知道，一个请求可以附带很多信息，从而会对服务器造成不同程度的影响</p><p>比如有的请求只是获取一些新闻，有的请求会改动服务器的数据</p><p>针对不同的请求，CORS规定了三种不同的交互模式，分别是：</p><ul>\n    <li><strong>简单请求</strong></li>\n    <li><strong>需要预检的请求</strong></li>\n    <li><strong>附带身份凭证的请求</strong></li>\n    </ul>\n    <p>这三种模式从上到下层层递进，请求可以做的事越来越多，要求也越来越严格。</p><p>下面分别说明三种请求模式的具体规范。</p><h1 id="article-md-title-2">简单请求</h1><p>当浏览器端运行了一段ajax代码（无论是使用XMLHttpRequest还是fetch api），浏览器会首先判断它属于哪一种请求模式</p><h2 id="article-md-title-3">简单请求的判定</h2><p>当请求<strong>同时满足</strong>以下条件时，浏览器会认为它是一个简单请求：</p><ol>\n    <li><p><strong>请求方法属于下面的一种：</strong></p><ul>\n    <li>get</li>\n    <li>post</li>\n    <li>head</li>\n    </ul>\n    </li>\n    <li><p><strong>请求头仅包含安全的字段，常见的安全字段如下：</strong></p><ul>\n    <li><code>Accept</code></li>\n    <li><code>Accept-Language</code></li>\n    <li><code>Content-Language</code></li>\n    <li><code>Content-Type</code></li>\n    <li><code>DPR</code></li>\n    <li><code>Downlink</code></li>\n    <li><code>Save-Data</code></li>\n    <li><code>Viewport-Width</code></li>\n    <li><code>Width</code></li>\n    </ul>\n    </li>\n    <li><p><strong>请求头如果包含<code>Content-Type</code>，仅限下面的值之一：</strong></p><ul>\n    <li><code>text/plain</code></li>\n    <li><code>multipart/form-data</code></li>\n    <li><code>application/x-www-form-urlencoded</code></li>\n    </ul>\n    </li>\n    </ol>\n    <p>如果以上三个条件同时满足，浏览器判定为简单请求。</p><p>下面是一些例子：</p><pre><code class="language-js"><span class="hljs-comment">// 简单请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/news"</span>);\n    \n    <span class="hljs-comment">// 请求方法不满足要求，不是简单请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/news"</span>, {\n      <span class="hljs-attr">method</span>:<span class="hljs-string">"PUT"</span>\n    })\n    \n    <span class="hljs-comment">// 加入了额外的请求头，不是简单请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/news"</span>, {\n      <span class="hljs-attr">headers</span>:{\n        <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>\n      }\n    })\n    \n    <span class="hljs-comment">// 简单请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/news"</span>, {\n      <span class="hljs-attr">method</span>: <span class="hljs-string">"post"</span>\n    })\n    \n    <span class="hljs-comment">// content-type不满足要求，不是简单请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/news"</span>, {\n      <span class="hljs-attr">method</span>: <span class="hljs-string">"post"</span>,\n      <span class="hljs-attr">headers</span>: {\n        <span class="hljs-string">"content-type"</span>: <span class="hljs-string">"application/json"</span>\n      }\n    })</code></pre>\n    <h2 id="article-md-title-4">简单请求的交互规范</h2><p>当浏览器判定某个<strong>ajax跨域请求</strong>是<strong>简单请求</strong>时，会发生以下的事情</p><ol>\n    <li><strong>请求头中会自动添加<code>Origin</code>字段</strong></li>\n    </ol>\n    <p>比如，在页面<code>http://my.com/index.html</code>中有以下代码造成了跨域</p><pre><code class="language-js"><span class="hljs-comment">// 简单请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/news"</span>);</code></pre>\n    <p>请求发出后，请求头会是下面的格式：</p><pre><code>GET /api/news/ HTTP/1.1\n    Host: crossdomain.com\n    Connection: keep-alive\n    ...\n    Referer: http://my.com/index.html\n    Origin: http://my.com</code></pre><p>看到最后一行没，<code>Origin</code>字段会告诉服务器，是哪个源地址在跨域请求</p><ol start="2">\n    <li><strong>服务器响应头中应包含<code>Access-Control-Allow-Origin</code></strong></li>\n    </ol>\n    <p>当服务器收到请求后，如果允许该请求跨域访问，需要在响应头中添加<code>Access-Control-Allow-Origin</code>字段</p><p>该字段的值可以是：</p><ul>\n    <li>*：表示我很开放，什么人我都允许访问</li>\n    <li>具体的源：比如<code>http://my.com</code>，表示我就允许你访问</li>\n    </ul>\n    <blockquote>\n    <p>实际上，这两个值对于客户端<code>http://my.com</code>而言，都一样，因为客户端才不会管其他源服务器允不允许，就关心自己是否被允许</p><p>当然，服务器也可以维护一个可被允许的源列表，如果请求的<code>Origin</code>命中该列表，才响应<code>*</code>或具体的源</p><p><strong>为了避免后续的麻烦，强烈推荐响应具体的源</strong></p></blockquote>\n    <p>假设服务器做出了以下的响应：</p><pre><code>HTTP/1.1 200 OK\n    Date: Tue, 21 Apr 2020 08:03:35 GMT\n    ...\n    Access-Control-Allow-Origin: http://my.com\n    ...\n    \n    消息体中的数据</code></pre><p>当浏览器看到服务器允许自己访问后，高兴的像一个两百斤的孩子，于是，它就把响应顺利的交给js，以完成后续的操作</p><p>下图简述了整个交互过程</p><figure class="markdown-image">\n          \n          <img style="width:auto" src="http://mdrs.yuanjin.tech/img/image-20200421162846480.png" title="image-20200421162846480" alt="image-20200421162846480">\n          <figcaption>image-20200421162846480</figcaption>\n      \n        </figure><h1 id="article-md-title-5">需要预检的请求</h1><p>简单的请求对服务器的威胁不大，所以允许使用上述的简单交互即可完成。</p><p>但是，如果浏览器不认为这是一种简单请求，就会按照下面的流程进行：</p><ol>\n    <li><strong>浏览器发送预检请求，询问服务器是否允许</strong></li>\n    <li><strong>服务器允许</strong></li>\n    <li><strong>浏览器发送真实请求</strong></li>\n    <li><strong>服务器完成真实的响应</strong></li>\n    </ol>\n    <p>比如，在页面<code>http://my.com/index.html</code>中有以下代码造成了跨域</p><pre><code class="language-js"><span class="hljs-comment">// 需要预检的请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/user"</span>, {\n      <span class="hljs-attr">method</span>:<span class="hljs-string">"POST"</span>, <span class="hljs-comment">// post 请求</span>\n      <span class="hljs-attr">headers</span>:{  <span class="hljs-comment">// 设置请求头</span>\n        <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,\n        <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>,\n        <span class="hljs-string">"content-type"</span>: <span class="hljs-string">"application/json"</span>\n      },\n      <span class="hljs-attr">body</span>: <span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-attr">name</span>: <span class="hljs-string">"袁小进"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span> }) <span class="hljs-comment">// 设置请求体</span>\n    });</code></pre>\n    <p>浏览器发现它不是一个简单请求，则会按照下面的流程与服务器交互</p><ol>\n    <li><strong>浏览器发送预检请求，询问服务器是否允许</strong></li>\n    </ol>\n    <pre><code>OPTIONS /api/user HTTP/1.1\n    Host: crossdomain.com\n    ...\n    Origin: http://my.com\n    Access-Control-Request-Method: POST\n    Access-Control-Request-Headers: a, b, content-type</code></pre><p>可以看出，这并非我们想要发出的真实请求，请求中不包含我们的响应头，也没有消息体。</p><p>这是一个预检请求，它的目的是询问服务器，是否允许后续的真实请求。</p><p>预检请求<strong>没有请求体</strong>，它包含了后续真实请求要做的事情</p><p>预检请求有以下特征：</p><ul>\n    <li>请求方法为<code>OPTIONS</code></li>\n    <li>没有请求体</li>\n    <li>请求头中包含<ul>\n    <li><code>Origin</code>：请求的源，和简单请求的含义一致</li>\n    <li><code>Access-Control-Request-Method</code>：后续的真实请求将使用的请求方法</li>\n    <li><code>Access-Control-Request-Headers</code>：后续的真实请求会改动的请求头</li>\n    </ul>\n    </li>\n    </ul>\n    <ol start="2">\n    <li><strong>服务器允许</strong></li>\n    </ol>\n    <p>服务器收到预检请求后，可以检查预检请求中包含的信息，如果允许这样的请求，需要响应下面的消息格式</p><pre><code>HTTP/1.1 200 OK\n    Date: Tue, 21 Apr 2020 08:03:35 GMT\n    ...\n    Access-Control-Allow-Origin: http://my.com\n    Access-Control-Allow-Methods: POST\n    Access-Control-Allow-Headers: a, b, content-type\n    Access-Control-Max-Age: 86400\n    ...</code></pre><p>对于预检请求，不需要响应任何的消息体，只需要在响应头中添加：</p><ul>\n    <li><code>Access-Control-Allow-Origin</code>：和简单请求一样，表示允许的源</li>\n    <li><code>Access-Control-Allow-Methods</code>：表示允许的后续真实的请求方法</li>\n    <li><code>Access-Control-Allow-Headers</code>：表示允许改动的请求头</li>\n    <li><code>Access-Control-Max-Age</code>：告诉浏览器，多少秒内，对于同样的请求源、方法、头，都不需要再发送预检请求了</li>\n    </ul>\n    <ol start="3">\n    <li><strong>浏览器发送真实请求</strong></li>\n    </ol>\n    <p>预检被服务器允许后，浏览器就会发送真实请求了，上面的代码会发生下面的请求数据</p><pre><code>POST /api/user HTTP/1.1\n    Host: crossdomain.com\n    Connection: keep-alive\n    ...\n    Referer: http://my.com/index.html\n    Origin: http://my.com\n    \n    {"name": "袁小进", "age": 18 }</code></pre><ol start="4">\n    <li><strong>服务器响应真实请求</strong></li>\n    </ol>\n    <pre><code>HTTP/1.1 200 OK\n    Date: Tue, 21 Apr 2020 08:03:35 GMT\n    ...\n    Access-Control-Allow-Origin: http://my.com\n    ...\n    \n    添加用户成功</code></pre><p>可以看出，当完成预检之后，后续的处理与简单请求相同</p><p>下图简述了整个交互过程</p><figure class="markdown-image">\n          \n          <img style="width:auto" src="http://mdrs.yuanjin.tech/img/image-20200421165913320.png" title="image-20200421165913320" alt="image-20200421165913320">\n          <figcaption>image-20200421165913320</figcaption>\n      \n        </figure><h1 id="article-md-title-6">附带身份凭证的请求</h1><p>默认情况下，ajax的跨域请求并不会附带cookie，这样一来，某些需要权限的操作就无法进行</p><p>不过可以通过简单的配置就可以实现附带cookie</p><pre><code class="language-js"><span class="hljs-comment">// xhr</span>\n    <span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();\n    xhr.withCredentials = <span class="hljs-literal">true</span>;\n    \n    <span class="hljs-comment">// fetch api</span>\n    fetch(url, {\n      <span class="hljs-attr">credentials</span>: <span class="hljs-string">"include"</span>\n    })</code></pre>\n    <p>这样一来，该跨域的ajax请求就是一个<em>附带身份凭证的请求</em></p><p>当一个请求需要附带cookie时，无论它是简单请求，还是预检请求，都会在请求头中添加<code>cookie</code>字段</p><p>而服务器响应时，需要明确告知客户端：服务器允许这样的凭据</p><p>告知的方式也非常的简单，只需要在响应头中添加：<code>Access-Control-Allow-Credentials: true</code>即可</p><p>对于一个附带身份凭证的请求，若服务器没有明确告知，浏览器仍然视为跨域被拒绝。</p><p>另外要特别注意的是：<strong>对于附带身份凭证的请求，服务器不得设置 <code>Access-Control-Allow-Origin 的值为*</code></strong>。这就是为什么不推荐使用*的原因</p><h1 id="article-md-title-7">一个额外的补充</h1><p>在跨域访问时，JS只能拿到一些最基本的响应头，如：Cache-Control、Content-Language、Content-Type、Expires、Last-Modified、Pragma，如果要访问其他头，则需要服务器设置本响应头。</p><p><code>Access-Control-Expose-Headers</code>头让服务器把允许浏览器访问的头放入白名单，例如：</p><pre><code>Access-Control-Expose-Headers: authorization, a, b</code></pre><p>这样JS就能够访问指定的响应头了。</p>'}}),Ia().mock("/api/comment","post",{code:0,msg:"",data:{id:"@guid",nickname:"@cname",content:"@cparagraph(1, 10)",createDate:Date.now(),"avatar|1":["https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar6.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar4.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar8.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar2.jpg"]}}),Ia().mock(/^\/api\/comment\/?(\?.+)?$/,"get",(function(t){const e=Ta().parse(t.url);return Ia().mock({code:0,msg:"",data:{"total|50-200":0,[`rows|${e.limit||10}`]:[{id:"@guid",nickname:"@cname",content:"@cparagraph(1, 10)",createDate:Date.now(),"avatar|1":["https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar6.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar4.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar8.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar2.jpg"]}]}})})),Ia().mock("/api/setting","get",{code:0,msg:"",data:{avatar:"https://img1.baidu.com/it/u=843934137,285845274&fm=253&fmt=auto&app=138&f=JPEG?w=435&h=290",siteTitle:"中野子豪",github:"https://github.com/DuYi-Edu",qq:"2384636535",qqQrCode:"http://www.duyiedu.com/source/img/%E5%B0%8F%E6%B8%A1%E5%BE%AE%E4%BF%A1%E4%BA%8C%E7%BB%B4%E7%A0%81.png",weixin:"QY085858",weixinQrCode:"http://www.duyiedu.com/source/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BA%8C%E7%BB%B4%E7%A0%81.png",mail:"lqy085858@gmail.com",icp:"暂无备案号",githubName:"Zhang-Yang",favicon:"http://mdrs.yuanjin.tech/Fs4CDlC6mwe_WXLMIiXcmSJLHO4f"}}),Ia().mock("/api/about","get",{code:0,msg:"",data:"https://www.strml.net/"}),Ia().mock(/^\/api\/project\/?$/,"get",{code:0,msg:"","data|5-10":[{id:"@uuid",name:"@ctitle(1, 10)","url|1":["@url",null],"github|1":["@url",null],"description|1-4":["@cparagraph(1, 5)"],thumb:"@image(300x250, @color, #fff, @natural)"}]});var Ma=n(8736);Ia().mock("/api/message","post",{code:0,msg:"",data:{id:"@guid",nickname:"@cname",content:"@cparagraph(1, 10)",createDate:Date.now(),"avatar|1":["https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar6.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar4.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar8.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar2.jpg"]}}),Ia().mock(/^\/api\/message\/?(\?.+)?$/,"get",(function(t){const e=Ma.parse(t.url);return Ia().mock({code:0,msg:"",data:{total:52,[`rows|${e.limit||10}`]:[{id:"@guid",nickname:"@cname",content:"@cparagraph(1, 10)",createDate:Date.now(),"avatar|1":["https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar6.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar4.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar8.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar2.jpg"]}]}})}));const qa={};var Oa={$on(t,e){qa[t]||(qa[t]=new Set),qa[t].add(e)},$off(t,e){qa[t]&&qa[t].delete(e)},$emit(t,...e){if(qa[t])for(const n of qa[t])n(...e)}},Wa=n.p+"img/loading.89007415.svg",Ba={loading:"n6c054pmEgLPauvpFm9c"};function Na(t){return t.querySelector("img[data-role=loading]")}function Pa(){let t=document.createElement("img");return t.dataset.role="loading",t.src=Wa,t.className=Ba.loading,t}function Ea(t,e){let n=Na(t);if(e.value){if(!n){const e=Pa();t.appendChild(e)}}else n&&n.remove()}const Ha=[];function Za(t){console.log(t)}Za();var Ya={inserted(t,e){const n={dom:t,src:e.value};Ha.push(n),Za(n)},unbind(t){}};xa.dispatch("setting/fetchSetting");const Ra=(0,a.ri)(Yt);Ra.config.globalProperties.$showMessage=ge,Ra.config.globalProperties.$bus=Oa,Ra.directive("loading",Ea),Ra.directive("lazy",Ya),Ra.use($a),Ra.use(xa),Ra.mount("#app")}},e={};function n(a){var i=e[a];if(void 0!==i)return i.exports;var s=e[a]={exports:{}};return t[a].call(s.exports,s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(e,a,i,s){if(!a){var o=1/0;for(d=0;d<t.length;d++){a=t[d][0],i=t[d][1],s=t[d][2];for(var r=!0,c=0;c<a.length;c++)(!1&s||o>=s)&&Object.keys(n.O).every((function(t){return n.O[t](a[c])}))?a.splice(c--,1):(r=!1,s<o&&(o=s));if(r){t.splice(d--,1);var l=i();void 0!==l&&(e=l)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[a,i,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.p="/vue-Blog/"}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,s,o=a[0],r=a[1],c=a[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(c)var d=c(n)}for(e&&e(a);l<o.length;l++)s=o[l],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(d)},a=self["webpackChunkmy_site"]=self["webpackChunkmy_site"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(3538)}));a=n.O(a)})();
//# sourceMappingURL=app.5319d26a.js.map